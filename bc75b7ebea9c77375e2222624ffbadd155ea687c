{
  "comments": [
    {
      "key": {
        "uuid": "3e14e9b0_a6c2dd4c",
        "filename": "BUILD",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-07-29T10:55:12Z",
      "side": 0,
      "message": "Yes, you are right, that commons_dbcp *is* packaged in the plugin-api because of transitive dependency of \"gerrit-server:server\" on \"//lib/commons:dbcp\". That why the standalone build should work (untested).\n\nHowever, bazel requires that direct dependencies are explicitly satisfied (strict). In this blog post Carmi did a great job in explaining how it works:\n\n  https://blog.bazel.build/2017/06/28/sjd-unused_deps.html\n\nThat\u0027s why this change broke in tree build. To make it work, just add explicitly:\n\n  //lib/commons:dbcp\n\nto the EXPORTS constants in gerrit-plugin-api/BUILD (untested).",
      "range": {
        "startLine": 20,
        "startChar": 9,
        "endLine": 20,
        "endChar": 27
      },
      "revId": "bc75b7ebea9c77375e2222624ffbadd155ea687c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}